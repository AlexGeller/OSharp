@inherits MiniRazor.TemplateBase<CodeEntity>
@namespace OSharp.CodeGeneration.Templates
@using System;
@using System.Collections.Generic;
@using System.Linq;
@using OSharp.CodeGeneration.Services.Entities
@using OSharp.CodeGeneration.Utils
@using OSharp.Collections;
@using OSharp.Exceptions;
@using OSharp.Extensions;
@{
  CodeEntity entity = Model;
  string moduleName = entity.Module.Name;
  string urlModule = entity.Module.Name.UpperToLowerAndSplit();
  string lowerModule = entity.Module.Name.ToLowerCase();
  string keyType = TypeHelper.ToSingleTypeName(entity.PrimaryKeyTypeFullName);
  string entityName = entity.Name;
  string urlEntity = entity.Name.UpperToLowerAndSplit("");
  string lowerEntity = entity.Name.ToLowerCase();
}
<template>
  <BasicTable @@register="registerTable">
    <template #toolbar>
      <Authority value="Root.Admin.@(moduleName).@(entityName).Create">
        <a-button type="primary" @@click="store.createRow">新增</a-button>
      </Authority>
    </template>
    <template #action="{ record }">
      <TableAction
        :actions="store.getActionItems(record)"
        :drop-down-actions="store.getDropDownActions(record)"
      />
    </template>
  </BasicTable>
</template>

<script lang="ts" setup>
  import { BasicTable, useTable } from '/@@/components/Table';
  import { @(lowerEntity)Store as store } from '/@@/store/modules/osharp/@(lowerModule)/@(lowerEntity)Store';
  import TableAction from '/@@/components/Table/src/components/TableAction.vue';
  import Authority from '/@@/components/Authority/src/Authority.vue';

  const [registerTable] = useTable(store.tableProps);
</script>
